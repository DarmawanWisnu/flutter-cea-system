@startuml
title Sequence Diagram - Register

actor "User" as User
participant "Register Screen" as Form
participant "AuthService" as Auth
participant "Firebase Auth" as Firebase
participant "Verify Screen" as Verify

' === Awal ===
User -> Form : Membuka halaman register
activate Form
Form -> User : Menampilkan form register
deactivate Form

' === Input data ===
User -> Form : Input email dan password
activate Form
Form -> User : Menampilkan data inputan
deactivate Form

User -> Form : Klik tombol Daftar
activate Form

' === Validasi input ===
Form -> Form : Validasi format email dan password

' === Kirim ke AuthService ===
Form -> Auth : registerWithEmailPassword(email, password)
activate Auth

' === Buat akun di Firebase ===
Auth -> Firebase : createUserWithEmailAndPassword()
activate Firebase
Firebase -> Firebase : Proses pembuatan akun
Firebase --> Auth : UserCredential / Error
deactivate Firebase

' === Kirim email verifikasi ===
alt Registrasi berhasil
  Auth -> Firebase : sendEmailVerification()
  activate Firebase
  Firebase --> Auth : Email terkirim
  deactivate Firebase
  
  Auth --> Form : Return UserCredential
  Form -> Verify : Navigate ke Verify Screen
  activate Verify
  Verify -> User : Menampilkan halaman verifikasi email
  deactivate Verify
else Registrasi gagal
  Auth --> Form : Throw FirebaseAuthException
  Form -> User : Menampilkan pesan error (email sudah terdaftar, dll)
end

deactivate Auth
deactivate Form

@enduml
