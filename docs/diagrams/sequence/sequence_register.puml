@startuml
scale 3
skinparam monochrome true
skinparam defaultFontSize 20
title Sequence Diagram - Register

actor "User" as User
participant "Register Screen" as Form
participant "AuthService" as Auth
participant "Firebase Auth" as Firebase
participant "Verify Screen" as Verify

' === Awal ===
User -> Form : Membuka halaman register
activate Form
Form -> User : Menampilkan form register

' === Input data ===
User -> Form : Input nama, email, password, lokasi
Form -> User : Menampilkan data inputan

User -> Form : Klik tombol Sign Up
Form -> Auth : registerWithEmailPassword(email, password)
activate Auth

' === Validasi ke Firebase ===
Auth -> Firebase : createUserWithEmailAndPassword()
activate Firebase
Firebase -> Firebase : Validasi kredensial
Firebase --> Auth : UserCredential / Error
deactivate Firebase

' === Kirim email verifikasi ===
alt Registrasi berhasil
  Auth -> Firebase : sendEmailVerification()
  activate Firebase
  Firebase --> Auth : Email terkirim
  deactivate Firebase
  
  Auth --> Form : Return UserCredential
  Form -> Verify : Navigate ke Verify Screen
  activate Verify
  Verify -> User : Menampilkan halaman verifikasi email
  deactivate Verify
else Registrasi gagal
  Auth --> Form : Throw FirebaseAuthException
  Form -> User : Menampilkan pesan error (email sudah terdaftar, dll)
end

deactivate Auth
deactivate Form

@enduml
